# 5장 그래이들 기초

## 5.1 그래이들의 빌드

### 5.1.1 빌드란 무엇인가

소프트웨어 빌드는 소스 코드 파일을 컴퓨터에서 실행할 수 있는 독립 소프트웨어 가공물로 변환하는 과정 또는 그 결과를 일컫는다. 

빌드 대상이 되는 소스 코드의 언어 종류에 따라 빌드 프로세스(순서)나 생성되는 결과물은 다르다. 즉, 같은 빌드를 하더라도 C언어와 자바의 코드가 다르며 내용도 다르다. 

빌드 툴은 이렇게 컴파일부터 결과물 생성까지의 프로세스를 실행한다. 하지만 컴파일이 필요한 언어의 빌드에만 국한되는 것은 아니다. 

- 지정한 디렉터리의 파일을 별도의 디렉터리에 복사한다.
- 지정한 애플리케이션을 실행한다.

같은 처리도 빌드 프로세스에 넣을 수 있다.

빌드 대상에 어떤 액션을 취하는 것, 이것이 빌드 툴에서 말하는 빌드다.

그래이들에서는 실행 단위를 태스크라고 부른다. 그리고 이 태스크를 실행하는 것을 빌드라고 하며, 빌드를 실행하기 위한 구조가 그래이들의 근간이다.

### 5.1.2 빌드의 입력 정보

빌드 실행 시 그래이들이 참조하는 파일이나 디렉터리, 파라미터에는 어떤 것들이 있으며, 어떤 역할을 하는지 살펴보자. 

그래이들에서 빌드 실행 시 입력 정보는 조건에 따라 달라질 수도 있으나, 입력 정보를 잘 활용하면 빌드 스크립트를 효율적으로 작성할 수 있다.

**초기화 스크립트**

빌드 시 가장 먼저 실행되는 그루비 스크립트다. 기본 파일명은 init.gradle이며, 주로 사용자 정보나 실행 환경 같은 초기 설정을 하는데 사용한다. 초기화 스크립트 지정 방법에는 몇 가지가 있으며, 여러 개의 스크립트 파일을 나눠서 지정할 수도 있다.

**설정 스크립트**

빌드 대상 프로젝트를 설정하는 그루비 스크립트다. 기본 파일명은 settings.gradle이며, 주로 빌드에 포함할 프로젝트를 정의하는데 사용된다. 멀티 프로젝트에서는 반드시 필요한 스크립트 파일로, 그래이들의 규칙에 따라 파일과 디렉터리를 배치해야 한다.

**빌드 스크립트**

빌드 입력 정보 중 가장 중요한 ‘빌드 정의'를 기술하는 그루비 스크립트다. 기본 파일은 build.gradle이다. 주로 프로젝트 의존관계나 태스크 정의를 할 때 사용하며, 일반적으로 빌드는 이 파일만 있어도 충분하다.

**속성 파일**

그래이들이 표준으로 참조하는 속성 파일로, 파일명은 gradle.properties이다. 환경에 따라 달라지는 파라미터를 빌드 스크립트 밖에 기술하고 싶을 때 사용된다. 빌드 실행 시 자동으로 이 파일을 읽으므로 빌드 스크립트에 따로 기술하지 않고도 편리하게 사용할 수 있다.

**환경 변수/명령줄 인수**

그래이들이 설치된 장비의 환경 변수와 빌드 실행 시 명령줄에서 전달하는 인수를 의미한다. 그래이들이 실행하는 프로세스에 고유한 환경 값을 전달하고 싶거나 실행에 관련된 설정을 할 때 필요하다.

**buildSrc 프로젝트**

빌드 시 참조하는 클래스 파일이나 플러그인 코드를 저장하는 프로젝트 디렉터리다. 여러 개의 빌드 스크립트가 참조하는 클래스 파일이나 자체 플러그인을 저장할 때 사용한다. 표준 빌드에서는 사용할 일이 거의 없지만, 복잡한 처리를 해야 하는 빌드에서는 빌드 스크립트와 처리를 분할할 수 있다.

초기화 스크립트, 설정 스크립트, 빌드 스크립트가 특히 중요하다. 스크립트 파일에 기술한 내용은 빌드를 실행했을 때 그래이들 고유의 도메인 객체에 위임된다.

### 5.1.3 빌드 흐름

명령어 해석 ~ 그래이들 실행 

→ 스크립트 파일 초기화

→ 프로젝트 설정

→ 태스크 실행