### DAY 15

**🔖  오늘 읽은 범위 : ~9장 단위테스트**

---

<aside>

📖 **책에서 기억하고 싶은 내용**

</aside>

- TDD의 법칙
    - 실패하는 단위 테스트를 작성할 때까지 실제 코드를 작성하지 않는다
    - 컴파일은 실패하지 않으면서 실행히 실패하는 정도로만 단위 테스트를 작성한다
    - 현재 실패하는 테스트를 통과할 정도로만 실제 코드를 작성한다
- 테스트 코드와 실제 코드가 함께 나올뿐더러 테스트 코드가 실제 코드보다 불과 몇 초 전에 나온다.
- 실제 코드와 맞먹을 정도로 방대한 테스트 코드는 심각한 관리 문제를 유발하기도 한다.
- 테스트 코드가 지저분할 수록 변경하기 어려워진다.
    - 테스트케이스가 있으면 변경이 쉬워지기 때문에
    - 테스트 슈트가 없으면 개발자는 자신이 수정한 코드가 제대로 도는지 확인할 방법이 없다
- 테스트 코드는 실제 코드 못지 않게 중요하다
- 가독성은 실제 코드보다 테스트 코드에 더더욱 중요하다.
- DSL로 테스트 코드를 구현하는 기법 - API 위에 함수와 유틸리티를 구현한 후 그 함수와 유틸리티를 사용하므로 테스트 코드를 짜기도 읽기도 쉬워진다.
- 테스트 당 assert 하나 → 꼭 지켜야하는 것은 아니나 최소화하는 것이 좋다
    - 테스트를 분리해 중복이 많아지거나
    - 이를 위해 템플릿 메서드 패턴을 사용해 중복을 제거하거나 - given/when 부분을 부모 클래스에 두고 then 부분을 자식 클래스에 두는 등
    - 위처럼 하게 되면 배보다 배꼽이 더 크기 때문에 꼭 필요하면 assert문을 여럿 사용하되, 최소한으로 줄임
- 테스트 함수마다 한 개념만 테스트해라
- F.I.R.S.T
    - Fast : 테스트는 빨라야 함
    - Independent : 각 테스트는 서로 의존하면 안됨
    - Repeatable: 어떤 환경에서든 반복 가능해야함
    - Self-Validating: 부울 값으로 결과를 내야 함
    - Timely: 적시에 작성되어야 한다
- 테스트 API를 구현해 도메인 특화 언어DLS를 만들자

<aside>

💡 **오늘 읽은 소감**

</aside>

요즘 가장 고민하는 부분이어서 열심히 읽었던 것 같다. 테스트 코드 작성에 미숙해 원래 코드보다 테스트 코드 작성에 시간이 더 걸린다. 테스트 코드를 어디서부터 작게 잘라야 할지도 어렵고 하다 보니. 고민이 많은 부분인데 하나 아이디어를 얻어가는 부분은 DLS를 만들어 보라는 점이었다. 코틀린을 학습하고 있어서 DLS 관련해서 학습할 예정이었는데 이 부분을 연결해서 같이 공부해보면 좋을거 같다. 

테스트 코드 작성이 중요하다고 말은 하는데 아직 그렇게까지 잘 동의하진 못하겠다. 물론 작동하는 것에 테스트가 필요하다고 생각하긴 하지만 어디서부터 어떤 범위까지 테스트 코드를 짜야하는지 등의 세세한 부분에 있어서 고민이 많은 거 같다.