## ※ 분석 단계의 데이터 모델링 특징

- 해당 업무의 현재뿐아니라 계획, 정책, 전략을 포함.
- 명명법, 도메인 등 정의된 규칙에 따른 일관성 있는 모델.
- 실무에 대한 내용이 충분히 포함된 내용.
- 물리 설계로 전환이 효율적으로 이뤄질 수 있는 모델.
- 각 엔티티, 속성, 관계 등 기본 업무 배경의 객관적 증거 존재.
- 업무 변형이나 확장 발생시 수용가능한 모델.

## ※ 4-STEP 데이터 모델링

- 정보공학의 모델링 방식+오브젝트 모델링 방식.
- 업무의 흐름을 이해한 상태에서 직접 엔티티와 속성 관계를 도출.
- 정보공학 모델링 : 업무를 프로세스와 데이터로 분리하여 기술적으로 모델을 완성.
- 오브젝트 모델링 : 업무를 구성하는 요구사항을 도출해 모델을 완성.

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/93b6955f-cf67-4a27-a1e5-386f59c6b063/Untitled.png)

1. 1-STEP
    - 업무구조(Architecture)를 통해 정적인 사항을 모델링하는 단계.
    - 엔티티나 속성을 도출하는 것.
2. 2-STEP
    - 업무의 처리과정에 따라 발생하는 엔티티, 속성, 관계를 정의하는 단계.
3. 3-STEP
    - 구현된 데이터 모델을 정보 시스템으로 구축하기 위한 데이터 모델을 적용하여 모델링 단계.
    - 엔티티간 관계 해소.
4. 4-STEP
    - 업무 구성과 흐름, 모델링 방법을 고려하여 모델과 데이터 모델의 적정성을 검증하는 단계.
    - 엔티티 관계 속성을 변경하거나 추가 삭제.

[※ 데이터 분석 모델링](https://www.notion.so/8cd4676847af4335ae300b3a21e7da00)

# 1. 엔티티 정의

## 1.1 엔티티 선정 작업 7가지

### ※ 엔티티를 분별하는 과정이 정보화 시스템 구축의 핵심 업무.

1. 업무와 관련해서 설명한 **업무 기술서를** 이용한다.
2. 현업 담당자와 **인터뷰**.
3. 현업의 **장표**를 활용한다.
    - 업무가 명시화 되어있는 장표 이용시 쉽게 엔티티 타입을  쉽게 도출 가능.
4. 기존 시스템이 구축 되어 있다면 **기존 시스템의 산출물**을 검토한다.
    - 주의점으로 **참조**만 할 뿐 기존 시스템을 따라가면 안된다.
    - 참조만 하고 현 업무에서 **엔티티가 유효한지 반드시 검증.**
5. DFD를 통해 업무를 분석했다면 **DFD의 Data Store**를 활용한다.
    - DFD(Data Flow Diagram) : 프로세스간 데이터 흐름을 표현하는 주요도구.
        
        ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/9ae40008-f25e-4558-ad2f-d4c4176f8e30/Untitled.png)
        
        - Process : 입력된 데이터를 원하는 형태로 변환하여 출력하기 위한 과정. ○ 표기.
        - Data Flow : DFD 구성요소간 데이터 흐름을 나타냄. → 표기.
        - Data Store : 데이터가 저장되는 장소. =로 표기.
        - External Entity : 프로세스 처리과정에서 데이터의 시/종점을 나타냄. □ 표기.
6. 현업의 업무를 견학하고 인터뷰와 업무 기술서에 누락된 정보를 체크한다.
7. 현재 업무에 나타나지 않았지만 BPR에 의해 업무를 재정의한 경우 관련 앤티티를 찾아야 한다.
    - BRP(Business Process Re-engineering)
        - 기업의 활동이나 업무의 전반적인 흐름을 분석하고 경영 목적에 맞게 조직과 사업을
        최적으로 다시 설계하여 구성하는 것.

## 1.2 엔티티 선정 방법

1. 업무 기술서, 장표, 인터뷰 정리 문서 등에서 **명사를 구분한다**.
    - 포괄적이고 다른 명사에 종속되지 않은 것을 찾아서 분리하면 작업량을 많이 줄일 수 있음.
2. 개념이 불분명하고 광범위한것은 제거한다.
3. 엔티티의 특성이나 **속성값은 제거**한다.
4. **포괄적인** 업무 프로세스에 해당되는 명사는 **제거**한다.
5. **중복되는 명사는 제거**한다.
6. 누락된 엔티티가 존재하는지 유추한다.

## 1.3 관계정의서 작성

- **기본 엔티티를 선정하는 작업이 가장 용이하고 행위 엔티티를 선정하는 작업이 제일 어렵다.**
- 엔티티명 : 조사된 엔티티 후보를 기술한다.
- 엔티티설명 : 선정된 엔티티의 의미기술.
- 동의어/유의어 : 작업중 엔티티에서 제거했던 동의어를 기술.
- 엔티티 구분: 유/무형에 따른 분류, 발생 시점에 따른 분류방법으로 엔티티를 구분하여 표시.

# 2. 관계 정의

### ※ 해당 엔티티로부터 타 엔티티간 관계가 존재하는 작업을 우선적으로 진행.

### ※ 관계의 중요 3가지는 
관계명(Mebership), 카디널리티(Cardinality), 선택도(Optionality)

## 2.1 관계 도출

1. 업무 기술서, 장표, 인터뷰 문서 등 **동사를 구분한다.**
2. 도출된 **엔티티와 관계**를 이용하여 관계 정의서를 작성한다.
3. 고객에게 질문하여 관계를 **세분화**하고 정확하게 도출한다.
    - 기준 엔티티명을 중심으로 질문한다.
4. 데이터 **모델링 툴** 등을 사용하여 모델을 직접 그린다.
5. 고객과 질문하고 협의 하여 모델을 검토한다.

# 3. 식별자 정의

### ※ 실 프로젝트에서는 식별자 분류 방법 중 주식별자 결정이 가장 중요하다.

### ※ 속성을 이용하여 주식별자를 선정하여 데이터 모델에 표현하도록 한다.

## 3.1 주식별자 정의

- 해당 업무에서 **자주 이용되는 속성**을 주식별자로 지정.
- 속성값의 길이가 가변적이고 속성값이 자주 변하는 속성은 부적합하다.
- 주식별자를 선정하기 위해 속성수는 적게 한다.
- 주식별자 속성은 반드시 값이 들어와야 한다.

## 3.2 보조식별자 정의

- 주식별자가 존재하지만 일반 속성 중 다른 속성에 결정자 역할을 할 수 있는 속성을 말한다.
- 보조식별자는 DB Table에서 Unique Index로 지정되어 활용된다.

## 3.3 외부식별자 정의

- 다른 엔티티와 관계를 통해 자식쪽 엔티티에 생성되는 속성.
- DB에서 FK역할.

## 3.4 식별자 업무규칙 정의

### ※ 주식별자와 외부 식별자간 데이터 무결성을 유지하기위해
식별자간 업무 규칙을 정의하는 참조 무결성 규칙이다.

- 참조 무결성(Referencial Integrity)
    - **기본키와 참조키간 관계가 항상 유지**됨을 보장한다.
    - **참조되는 테이블의 행을 참조하는 참조키가 존재하는 한 삭제될 수 없고,
    기본키도 변경 될 수 없다**.

# 4. 속성 정의

### ※ 정보를 나타내는 최소 단위로 업무상 반드시 필요한 정보.

### ※ 각 속성은 반드시 하나의 엔티티에 속해야하고 전체 데이터 모델에서 
하나의 의미만을 가지고 있어야한다.

## 4.1 속성 발견 방법

- **업무 사실에 근거하여 속성 발견.**
    - 업무 흐름 구조를 설명한 업무기술서와 장표가 가장 유용함.
- 엔티티를 추출하는 동안 6~70%정도 안정적이고 확실한 속성을 분석 가능.
- 프로세스 모델링을 진행 동안 1~20%정도 업무의 기능에 따라 관련 속성 정보 얻을 수 있음.
- 데이터 모델과 프로세스 모델을 크로스 체크하는 상관 모델링 단계에서 10%정도 도출.
- 기존 구축 시스템 분석을 통해 속성을 얻을 수 있지만 참고만 한다.

## 4.2 속성 규칙 정의

1. 속성의 3분류를 정의한다.
    - **기본속성(Basic Attributes)**
        - **업무상 수집된 기본 속성**.
    - **설계속성(Designed Attributes)**
        - 업무에 필요한 정보를 주기위해 **시스템에서 고안한 속성**.
    - **파생속성(Derived Attributes)**
        - 반드시 **다른 속성에 의해 계산되거나 영향을 받아 생성된 속성**.
2. 속성값의 필요여부를 정의한다.
    - 선택 속성 : Null 상태로 존재할 수 있는 속성.
    - 필수 속성 : 엔티티가 생성 될 때 생성되고, 사라질 때까지  그 값이 반드시 존재하는 속성.
    - 물리 설계 이후 Null/Not Null형식으로 지정.
3. 속성의 기본값을 정의한다.
    - 속성값이 들어오지 않아도 어떤 값을 가지게 하는 규칙.
4. 반드시 정해진 값(Check Value)만 가져야하는지 정의한다.
    - 도메인을 정의하여 사용자 정의 데이터 타입으로 사용해도 된다.

# 5. 도메인 정의

### ※ 엔티티의 속성에 대한 데이터 타입과 크기, 제약사항을 지정하는 것.

### ※ 데이터 타입과 크기가 부여되 모델관리가 용이하고 SQL문으로 속성의 타입과 크기를 잘못 부여해도 에러가 발생하는 경우가 없다.

## 5.1 도메인 유형

- 코드에 대한 도메인
    - 코드형식의 데이터는 타입이나 길이가 비슷하다 하더라도 독립적인 의미를 가지고 속성이 변할 수 있기 때문에 별도의 도메인을 생성해준다.
- 일련번호
    - 주식별자 관리를 위해 인공적으로 생성한 속성에 대해 도메인을 별도로 부여하여 관리한다.
- 일반적인 속성
    - 성격에 따라 그룹으로 묶되 길이나 데이터타입별로 묶는 것보다 속성이 의미하는 분류대로 도메인 분류를 구성하는 것이 좋다.
    1. 데이터 모델의 모든 속성을 나열한다.
    2. 모든 속성중 뒤부터 2~4자정도 분리한다.
    3. 공통적으로 발생하는 접미어를 분리하여 하나로 만든다.
    4. 분리된 접미어를 비슷한 것끼리 묶어 그룹을 만들어 이름을 부여한다.
    5. 각 도메인별로 데이터타입과 길이를 지정한다.
    6. 각 엔티티 속성에 도메인을 할당한다.
    
    ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/f0f8a54a-4c15-4466-b766-ee8b14baf935/Untitled.png)
    
    ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/ce8c1713-eebf-4970-afb3-72b6f9b38604/Untitled.png)
    
    ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/42fc67b8-6fe0-457a-a667-bc58e9cb437d/Untitled.png)
    
    ![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/eb8385b6-0e51-4362-966a-2cf18784411d/Untitled.png)
    

# 6. 용어사전 정의

### ※ 논리 데이터 모델에 기술된 속성명과 테이블명에 업무적인 용어를 
적용하거나 프로젝트에서 사용하기 위한 이름을 부여하여 데이터 모델과
애플리케이션 인터페이스에서 효율적인 정보화 시스템을 구축하기 위함.

### ※ 논리명 = 한글, 물리명 = 영어.

## 6.1 용어사전

- 전체 프로젝트에 일관성있는 데이터이름과 인터페이스를 제공하기 위해 
논리명, 물리명, 용어정의를 기술한다.
- 엔티티 속성명을 한곳에 모아 기술한다.
- 속성명을 업무에서 사용하는 단위로 분리한다.
- 각 단위 속서에 의미를 기술하고 물리 속성명을 업무 특성에 적합하게 정의한다.
- 물리 속성명 명명규칙을 정한다
- 단위 속성명에 따라 엔티티의 모든 속성명에 대해 논리적 속성명을 일치시키고
물리 속성명을 생성해준다.