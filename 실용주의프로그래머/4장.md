# TIL (2022.03.24)

### DAY 7

**🔖  오늘 읽은 범위 : 4장 실용주의 편집증**

---

<aside>

💡 **책에서 기억하고 싶은 내용**

</aside>

- 여러분은 완벽한 소프트웨어를 만들 수 없다.
- 실용주의 프로그래머는 자기 자신 역시 믿지 않는다.
- DBC(Design By Contract, 계약에 의한 설계), 계약으로 설계하라
- 일찍 작동을 멈춰라
- 망치지 말고 멈춰라
- 디버깅 행위가 디버깅하려먼 시스템의 행동을 바꿔 버리는 일종의 ‘하이젠버그’적인 문제다.
- 리소스를 할당하는 루틴이 해제 역시 책임져야 한다.
- 잘 모르겠을 땐 언제나 스코프를 줄이는 편이 낫다
- 같은 순서로 할당해야 교착 가능성을 줄일 수 있다.
- 작은 단계를 밟아라. 언제나.
- 예언하지 ㅁ라라.

연습 문제

- 일부 C, C++ 개발자들은 어떤 포인터가 가리키는 메모리를 해제한 다음 반드시 그 포인터 값을 NULL로 설정한다. 왜 그럴까?
    - 대부분의 C, C++ 구현에서 어떤 포인터가 정말로 유효한 메모리를 가리키는지 확인할 방법이 없다. 어떤 메모리 영역의 할당을 해제한 후 나중에 프로그램에서 그 메모리를 참조하는 실수가 자주 일어난다. 그때쯤이면 그 포인터가 가리키는 메모리는 다른 용도로 다시 할당되었을 수도 있다. 포인터에 NULL을 지정하여 이런 잘못된 참조를 막으려는 것이다. 대부분의 구현에서 NULL 포인터를 참조하면 런타임 오류가 발생한다.
- 일부 자바 개발자들은 어떤 객체를 사용한 다음 반드시 그 객체를 가리켰던 변수를 NULL로 설정한다. 왜 그럴까?
    - 변수를 NULL로 설정하면 그 변수가 가리키던 객체를 가리키는 포인터의 수가 1개 줄어든다. 포인터 개수가 0이 되면 그 객체는 가비지 컬렉션 대상이 된다. 실행 시간이 길어서 메모리 사용량이 시간이 지남에 따라 늘어나지 않도록 신경을 써야 하는 프로그램이라면 변수에 NULL을 설정하는 것이 중요할 수도 있다.

<aside>

🤔 **오늘 읽은 소감**

</aside>

- 왜 DBC는 많이 사용되지 않을까? 를 검색해봤다.
    
    
    물론 DBC를 사용해 빠르게 실패하면 외부 소스에 의존하거나 다른 구성 요소를 인터페이스로 연결할 경우 매우 유용할 수 있다. 
    
    DBC의 주 문제는 대부분 계약을 공식적으로 명세화 할 수 없거나 현재의 정적 분석 도구로 체크하기 어렵다는 점이다. 주류 언어에서 이런 부분이 보장되어야 사람들이 많이 쓸텐데 DBC에선 위와 같이 필요한 것들이 제공되지 않는다.
    
    TDD에서 테스트는 사람이 작성하고 잘 문서화되어 있다. 사람은 테스트를 작성하고 정확히 해석해 그 해석을 기반으로 확신을 얻을 수 있다.
    
    JavaDocs 가이드를 읽으면 문서가 기본적으로 테스트 계획을 작성하기 충분한 계약을 제시해야 한다고 써있다. 즉, 계약에 의한 설계가 TDD와 반드시 상호 배타적인 것도 아니다. 
    
    다만 DBC는 빠른 실패를 런타임에 체크하는 반면 TDD가 컴파일 타임에 체크한다. (정확히는 단위 테스트 실행을 위해 컴파일 직후 새 단계가 있다.)
    
    즉, TDD는 DBC에 비해 더 빠르게 피드백을 얻을 수 있다. DBC를 사용하면 테스트가 포함된 코드를 작성하긴 하지만 좀 더 연습이 많이 필요하다. 
    
    다른 장점으로 TDD는 읽기를 방지할 수 있는 자동 테스트를 만들고 리팩토링을 안전하게 할 수 있어 설계를 점진적으로 확장할 수 있다. DBC는 이런 가능성을 제공하지 않는다.