### 시스템 구조

타이머(Timer)

- 사용자 프로그램에게 CPU 제어권이 넘어갈 때 timer에 시간을 세팅하면서 넘어감
- 시간이 지나면 timer가 interrupt를 걸게 되고 CPU 제어권이 사용자 프로그램으로부터 운영체제로 넘어간다.
- 이런 식으로 무한 루프 등으로 발생할 수 있는 CPU의 지속적인 점유를 방지한다.

mode bit

- 1 - 사용자 모드: 사용자 프로그램이 CPU에서 실행중, 제한된 instructions 실행만 가능
    - 다른 device의 접근 권한을 제한함
- 0 - 커널 모드: 운영체제가 CPU에서 실행중

Device Controller

- I/O device controller : 해당 I/O 장비를 관리하는 작은 CPU

Device driver(장치 구동기) : OS 코드 중 각 장치별 처리 루틴 → software

device controller(장치 제어기) : 각 장치를 통제하는 일종의 작은 CPU → hardware

DMA(Direct Memory Access) Controller - I/O 의 interrupt를 모두 받아 데이터를 메모리 컨트롤러에 요청해 처리 후, CPU에 인터럽트를 한 번 발생시킨다.

system call - 사용자 프로그램이 운영체제에게 I/O 요청을 위해 interrupt를 거는 방법(software interrupt or trap이라고도 한다. trap은 exception도 포함함)

일반적인 interrupt는 hardware interrupt라고 한다. - ex) keyboard controller가 거는 interrupt, timer가 거는 interrupt 등 device controller가 발생시키는 interrupt

각기 interrupt마다 처리해야 하는 코드가 다 다르고 그걸 나타낸 코드를 interrupt 처리 루틴(interrupt service routine)이라 한다. 해당 interrupt의 처리 루틴 주소를 interrupt vector라고 한다.

### 동기식, 비동기식 I/O

synchronous I/O

- I/O 요청 후 입출력 작업이 완료된 후에야 제어가 사용자 프로그램에 넘어감
- 구현 방법 1
    - I/O가 끝날 때까지 CPU를 낭비시킴
    - 매 시점 하나의 I/O만 일어날 수 있음
- 구현 방법 2
    - I/O가 완료될 때까지 해당 프로그램에게서 CPU를 빼앗음
    - I/O 처리를 기다리는 줄에 그 프로그램을 줄 세움
    - 다른 프로그램에게 CPU를 줌

asynchronous I/O

- I/O가 시작된 후 입출력 작업이 끝나기를 기다리지 않고 제어가 사용자 프로그램에 즉시 넘어감

두 경우 모두 I/O의 완료는 interrupt로 알려준다.

DMA - CPU 외에 메모리를 접근할 수 있는 장치

device controller가 device의 buffer storage의 내용을 메모리에 block 단위로 직접 전송하고, DMA도 block 단위로 인터럽트를 발생시킨다.

Memory mapped I/O

저장장치 계층 구조

Registers → Cache memory → main memory ~~ primary, 휘발성, 속도 빠르고 비용 비쌈 

magnetic Disk → Optical Disk → Magnetic Tape ~~ secondary, 비휘발성, 속도 느리고 비용 저렴

virtual memory